<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Enumerator
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/mruby.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Enumerator";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/mruby.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">Enumerator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Enumerator
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Enumerator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>mrbgems/mruby-enumerator/mrblib/enumerator.rb<span class="defines">,<br />
  mrbgems/mruby-enum-lazy/mrblib/lazy.rb,<br /> mrbgems/mruby-enum-chain/mrblib/chain.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A class which allows both internal and external iteration.</p>

<p>An Enumerator can be created by the following methods.
- <span class='object_link'><a href="Kernel.html#to_enum-instance_method" title="Kernel#to_enum (method)">Kernel#to_enum</a></span>
- <span class='object_link'><a href="Kernel.html#enum_for-instance_method" title="Kernel#enum_for (method)">Kernel#enum_for</a></span>
- <span class='object_link'><a href="#initialize-instance_method" title="Enumerator#initialize (method)">Enumerator.new</a></span></p>

<p>Most methods have two forms: a block form where the contents
are evaluated for each item in the enumeration, and a non-block form
which returns a new Enumerator wrapping the iteration.</p>

<pre class="code ruby"><code class="ruby">  enumerator = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">%w(</span><span style="color:#D20">one two three</span><span style="color:#710">)</span></span>.each
  puts enumerator.class <span style="color:#777"># =&gt; Enumerator</span>

  enumerator.each_with_object(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span>) <span style="color:#080;font-weight:bold">do</span> |item, obj|
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>obj<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>item<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#777"># foo: one</span>
  <span style="color:#777"># foo: two</span>
  <span style="color:#777"># foo: three</span>

  enum_with_obj = enumerator.each_with_object(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span>)
  puts enum_with_obj.class <span style="color:#777"># =&gt; Enumerator</span>

  enum_with_obj.each <span style="color:#080;font-weight:bold">do</span> |item, obj|
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>obj<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>item<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#777"># foo: one</span>
  <span style="color:#777"># foo: two</span>
  <span style="color:#777"># foo: three</span>
</code></pre>

<p>This allows you to chain Enumerators together.  For example, you
can map a list’s elements to strings containing the index
and the element as a string via:</p>

<pre class="code ruby"><code class="ruby">  puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">%w[</span><span style="color:#D20">foo bar baz</span><span style="color:#710">]</span></span>.map.with_index { |w, i| <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>i<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>w<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> }
  <span style="color:#777"># =&gt; [&quot;0:foo&quot;, &quot;1:bar&quot;, &quot;2:baz&quot;]</span>
</code></pre>

<p>An Enumerator can also be used as an external iterator.
For example, Enumerator#next returns the next value of the iterator
or raises StopIteration if the Enumerator is at the end.</p>

<pre class="code ruby"><code class="ruby">  e = [<span style="color:#00D">1</span>,<span style="color:#00D">2</span>,<span style="color:#00D">3</span>].each   <span style="color:#777"># returns an enumerator object.</span>
  puts e.next   <span style="color:#777"># =&gt; 1</span>
  puts e.next   <span style="color:#777"># =&gt; 2</span>
  puts e.next   <span style="color:#777"># =&gt; 3</span>
  puts e.next   <span style="color:#777"># raises StopIteration</span>
</code></pre>

<p>You can use this to implement an internal iterator as follows:</p>

<pre class="code ruby"><code class="ruby">  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ext_each</span>(e)
    <span style="color:#080;font-weight:bold">while</span> <span style="color:#069">true</span>
      <span style="color:#080;font-weight:bold">begin</span>
        vs = e.next_values
      <span style="color:#080;font-weight:bold">rescue</span> <span style="color:#036;font-weight:bold">StopIteration</span>
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#d70">$!</span>.result
      <span style="color:#080;font-weight:bold">end</span>
      y = <span style="color:#080;font-weight:bold">yield</span>(*vs)
      e.feed y
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>

  o = <span style="color:#036;font-weight:bold">Object</span>.new

  <span style="color:#080;font-weight:bold">def</span> o.<span style="color:#06B;font-weight:bold">each</span>
    puts <span style="color:#080;font-weight:bold">yield</span>
    puts <span style="color:#080;font-weight:bold">yield</span>(<span style="color:#00D">1</span>)
    puts <span style="color:#080;font-weight:bold">yield</span>(<span style="color:#00D">1</span>, <span style="color:#00D">2</span>)
    <span style="color:#00D">3</span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#777"># use o.each as an internal iterator directly.</span>
  puts o.each {|*x| puts x; [<span style="color:#A60">:b</span>, *x] }
  <span style="color:#777"># =&gt; [], [:b], [1], [:b, 1], [1, 2], [:b, 1, 2], 3</span>

  <span style="color:#777"># convert o.each to an external iterator for</span>
  <span style="color:#777"># implementing an internal iterator.</span>
  puts ext_each(o.to_enum) {|*x| puts x; [<span style="color:#A60">:b</span>, *x] }
  <span style="color:#777"># =&gt; [], [:b], [1], [:b, 1], [1, 2], [:b, 1, 2], 3</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Enumerator/Lazy.html" title="Enumerator::Lazy (class)">Lazy</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Enumerator/Chain.html" title="Enumerator::Chain (class)">Chain</a></span>, <span class='object_link'><a href="Enumerator/Generator.html" title="Enumerator::Generator (class)">Generator</a></span>, <span class='object_link'><a href="Enumerator/Lazy.html" title="Enumerator::Lazy (class)">Lazy</a></span>, <span class='object_link'><a href="Enumerator/Yielder.html" title="Enumerator::Yielder (class)">Yielder</a></span>
    
  
</p>



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Enumerable.html#NONE-constant" title="Enumerable::NONE (constant)">Enumerable::NONE</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#args-instance_method" title="#args (instance method)">#<strong>args</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute args.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#fib-instance_method" title="#fib (instance method)">#<strong>fib</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute fib.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#meth-instance_method" title="#meth (instance method)">#<strong>meth</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute meth.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#obj-instance_method" title="#obj (instance method)">#<strong>obj</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute obj.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#produce-class_method" title="produce (class method)">.<strong>produce</strong>(init = NONE, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><table>
  <tbody>
    <tr>
      <td>call-seq:    Enumerator.produce(initial = nil)       <td>val</td>
      <td> -&gt; enumerator.</td>
    </tr>
  </tbody>
</table>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%2B-instance_method" title="#+ (instance method)">#<strong>+</strong>(other)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>(*argv, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><table>
  <tbody>
    <tr>
      <td>call-seq:   enum.each {</td>
      <td>elm</td>
      <td>block }                    -&gt; obj   enum.each                                    -&gt; enum   enum.each(*appending_args) {</td>
      <td>elm</td>
      <td>block }   -&gt; obj   enum.each(*appending_args)                   -&gt; an_enumerator.</td>
    </tr>
  </tbody>
</table>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_with_index-instance_method" title="#each_with_index (instance method)">#<strong>each_with_index</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><table>
  <tbody>
    <tr>
      <td>call-seq:   e.each_with_index {</td>
      <td>(*args), idx</td>
      <td>… }   e.each_with_index.</td>
    </tr>
  </tbody>
</table>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#feed-instance_method" title="#feed (instance method)">#<strong>feed</strong>(value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.feed obj   -&gt; nil.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(obj, method = :each, *args)  &#x21d2; Enumerator </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new Enumerator object, which can be used as an Enumerable.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">#<strong>initialize_copy</strong>(obj)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next-instance_method" title="#next (instance method)">#<strong>next</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.next   -&gt; object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next_values-instance_method" title="#next_values (instance method)">#<strong>next_values</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.next_values   -&gt; array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek-instance_method" title="#peek (instance method)">#<strong>peek</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.peek   -&gt; object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek_values-instance_method" title="#peek_values (instance method)">#<strong>peek_values</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.peek_values   -&gt; array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.rewind   -&gt; e.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_index-instance_method" title="#with_index (instance method)">#<strong>with_index</strong>(offset = 0, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><table>
  <tbody>
    <tr>
      <td>call-seq:   e.with_index(offset = 0) {</td>
      <td>(*args), idx</td>
      <td>… }   e.with_index(offset = 0).</td>
    </tr>
  </tbody>
</table>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_object-instance_method" title="#with_object (instance method)">#<strong>with_object</strong>(object, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><table>
  <tbody>
    <tr>
      <td>call-seq:   e.each_with_object(obj) {</td>
      <td>(*args), obj</td>
      <td>… }   e.each_with_object(obj)   e.with_object(obj) {</td>
      <td>(*args), obj</td>
      <td>… }   e.with_object(obj).</td>
    </tr>
  </tbody>
</table>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Enumerable.html#__update_hash-class_method" title="Enumerable.__update_hash (method)">__update_hash</a></span>, <span class='object_link'><a href="Enumerable.html#all%3F-instance_method" title="Enumerable#all? (method)">#all?</a></span>, <span class='object_link'><a href="Enumerable.html#any%3F-instance_method" title="Enumerable#any? (method)">#any?</a></span>, <span class='object_link'><a href="Enumerable.html#chain-instance_method" title="Enumerable#chain (method)">#chain</a></span>, <span class='object_link'><a href="Enumerable.html#collect-instance_method" title="Enumerable#collect (method)">#collect</a></span>, <span class='object_link'><a href="Enumerable.html#count-instance_method" title="Enumerable#count (method)">#count</a></span>, <span class='object_link'><a href="Enumerable.html#cycle-instance_method" title="Enumerable#cycle (method)">#cycle</a></span>, <span class='object_link'><a href="Enumerable.html#detect-instance_method" title="Enumerable#detect (method)">#detect</a></span>, <span class='object_link'><a href="Enumerable.html#drop-instance_method" title="Enumerable#drop (method)">#drop</a></span>, <span class='object_link'><a href="Enumerable.html#drop_while-instance_method" title="Enumerable#drop_while (method)">#drop_while</a></span>, <span class='object_link'><a href="Enumerable.html#each_cons-instance_method" title="Enumerable#each_cons (method)">#each_cons</a></span>, <span class='object_link'><a href="Enumerable.html#each_slice-instance_method" title="Enumerable#each_slice (method)">#each_slice</a></span>, <span class='object_link'><a href="Enumerable.html#each_with_object-instance_method" title="Enumerable#each_with_object (method)">#each_with_object</a></span>, <span class='object_link'><a href="Enumerable.html#entries-instance_method" title="Enumerable#entries (method)">#entries</a></span>, <span class='object_link'><a href="Enumerable.html#filter_map-instance_method" title="Enumerable#filter_map (method)">#filter_map</a></span>, <span class='object_link'><a href="Enumerable.html#find_all-instance_method" title="Enumerable#find_all (method)">#find_all</a></span>, <span class='object_link'><a href="Enumerable.html#find_index-instance_method" title="Enumerable#find_index (method)">#find_index</a></span>, <span class='object_link'><a href="Enumerable.html#first-instance_method" title="Enumerable#first (method)">#first</a></span>, <span class='object_link'><a href="Enumerable.html#flat_map-instance_method" title="Enumerable#flat_map (method)">#flat_map</a></span>, <span class='object_link'><a href="Enumerable.html#grep-instance_method" title="Enumerable#grep (method)">#grep</a></span>, <span class='object_link'><a href="Enumerable.html#group_by-instance_method" title="Enumerable#group_by (method)">#group_by</a></span>, <span class='object_link'><a href="Enumerable.html#hash-instance_method" title="Enumerable#hash (method)">#hash</a></span>, <span class='object_link'><a href="Enumerable.html#include%3F-instance_method" title="Enumerable#include? (method)">#include?</a></span>, <span class='object_link'><a href="Enumerable.html#inject-instance_method" title="Enumerable#inject (method)">#inject</a></span>, <span class='object_link'><a href="Enumerable.html#lazy-instance_method" title="Enumerable#lazy (method)">#lazy</a></span>, <span class='object_link'><a href="Enumerable.html#max-instance_method" title="Enumerable#max (method)">#max</a></span>, <span class='object_link'><a href="Enumerable.html#max_by-instance_method" title="Enumerable#max_by (method)">#max_by</a></span>, <span class='object_link'><a href="Enumerable.html#min-instance_method" title="Enumerable#min (method)">#min</a></span>, <span class='object_link'><a href="Enumerable.html#min_by-instance_method" title="Enumerable#min_by (method)">#min_by</a></span>, <span class='object_link'><a href="Enumerable.html#minmax-instance_method" title="Enumerable#minmax (method)">#minmax</a></span>, <span class='object_link'><a href="Enumerable.html#minmax_by-instance_method" title="Enumerable#minmax_by (method)">#minmax_by</a></span>, <span class='object_link'><a href="Enumerable.html#none%3F-instance_method" title="Enumerable#none? (method)">#none?</a></span>, <span class='object_link'><a href="Enumerable.html#one%3F-instance_method" title="Enumerable#one? (method)">#one?</a></span>, <span class='object_link'><a href="Enumerable.html#partition-instance_method" title="Enumerable#partition (method)">#partition</a></span>, <span class='object_link'><a href="Enumerable.html#reject-instance_method" title="Enumerable#reject (method)">#reject</a></span>, <span class='object_link'><a href="Enumerable.html#reverse_each-instance_method" title="Enumerable#reverse_each (method)">#reverse_each</a></span>, <span class='object_link'><a href="Enumerable.html#sort-instance_method" title="Enumerable#sort (method)">#sort</a></span>, <span class='object_link'><a href="Enumerable.html#sort_by-instance_method" title="Enumerable#sort_by (method)">#sort_by</a></span>, <span class='object_link'><a href="Enumerable.html#take-instance_method" title="Enumerable#take (method)">#take</a></span>, <span class='object_link'><a href="Enumerable.html#take_while-instance_method" title="Enumerable#take_while (method)">#take_while</a></span>, <span class='object_link'><a href="Enumerable.html#tally-instance_method" title="Enumerable#tally (method)">#tally</a></span>, <span class='object_link'><a href="Enumerable.html#to_h-instance_method" title="Enumerable#to_h (method)">#to_h</a></span>, <span class='object_link'><a href="Enumerable.html#uniq-instance_method" title="Enumerable#uniq (method)">#uniq</a></span>, <span class='object_link'><a href="Enumerable.html#zip-instance_method" title="Enumerable#zip (method)">#zip</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(obj, method = :each, *args)  &#x21d2; <tt><span class='object_link'><a href="" title="Enumerator (class)">Enumerator</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new Enumerator object, which can be used as an
Enumerable.</p>

<p>In the first form, iteration is defined by the given block, in
which a “yielder” object, given as block parameter, can be used to
yield a value by calling the +yield+ method (aliased as +«+):</p>

<pre class="code ruby"><code class="ruby">fib = <span style="color:#036;font-weight:bold">Enumerator</span>.new <span style="color:#080;font-weight:bold">do</span> |y|
  a = b = <span style="color:#00D">1</span>
  loop <span style="color:#080;font-weight:bold">do</span>
    y &lt;&lt; a
    a, b = b, a + b
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

p fib.take(<span style="color:#00D">10</span>) <span style="color:#777"># =&gt; [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]</span>
</code></pre>

<p>In the second, deprecated, form, a generated Enumerator iterates over the
given object using the given method with the given arguments passed. This
form is left only for internal use.</p>

<p>Use of this form is discouraged.  Use Kernel#enum_for or Kernel#to_enum
instead.</p>


  </div>
</div>
<div class="tags">
  
  


</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 117</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(obj=<span style="color:#036;font-weight:bold">NONE</span>, meth=<span style="color:#A60">:each</span>, *args, &amp;block)
  <span style="color:#080;font-weight:bold">if</span> block
    obj = <span style="color:#036;font-weight:bold">Generator</span>.new(&amp;block)
  <span style="color:#080;font-weight:bold">elsif</span> obj == <span style="color:#036;font-weight:bold">NONE</span>
    raise <span style="color:#036;font-weight:bold">ArgumentError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wrong number of arguments (given 0, expected 1+)</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#33B">@obj</span> = obj
  <span style="color:#33B">@meth</span> = meth
  <span style="color:#33B">@args</span> = args
  <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@dst</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@stop_exc</span> = <span style="color:#069">false</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="args=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="args-instance_method">
  
    #<strong>args</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute args</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 133</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">args</span>
  <span style="color:#33B">@args</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="fib-instance_method">
  
    #<strong>fib</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute fib</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 134</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">fib</span>
  <span style="color:#33B">@fib</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="meth=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="meth-instance_method">
  
    #<strong>meth</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute meth</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 133</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">meth</span>
  <span style="color:#33B">@meth</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="obj=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="obj-instance_method">
  
    #<strong>obj</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute obj</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 133</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">obj</span>
  <span style="color:#33B">@obj</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="produce-class_method">
  
    .<strong>produce</strong>(init = NONE, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
   Enumerator.produce(initial = nil) { |val| } -&gt; enumerator</p>

<p>Creates an infinite enumerator from any block, just called over and
over.  Result of the previous iteration is passed to the next one.
If +initial+ is provided, it is passed to the first iteration, and
becomes the first element of the enumerator; if it is not provided,
first iteration receives +nil+, and its result becomes first
element of the iterator.</p>

<p>Raising StopIteration from the block stops an iteration.</p>

<p>Examples of usage:</p>

<p>Enumerator.produce(1, &amp;:succ)   # =&gt; enumerator of 1, 2, 3, 4, ….</p>

<p>Enumerator.produce { rand(10) } # =&gt; infinite random number sequence</p>

<table>
  <tbody>
    <tr>
      <td>ancestors = Enumerator.produce(node) {</td>
      <td>prev</td>
      <td>node = prev.parent or raise StopIteration }</td>
    </tr>
    <tr>
      <td>enclosing_section = ancestors.find {</td>
      <td>n</td>
      <td>n.type == :section }</td>
    </tr>
  </tbody>
</table>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ArgumentError.html" title="ArgumentError (class)">ArgumentError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 580</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#036;font-weight:bold">Enumerator</span>.<span style="color:#06B;font-weight:bold">produce</span>(init=<span style="color:#036;font-weight:bold">NONE</span>, &amp;block)
  raise <span style="color:#036;font-weight:bold">ArgumentError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">no block given</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">if</span> block.nil?
  <span style="color:#036;font-weight:bold">Enumerator</span>.new <span style="color:#080;font-weight:bold">do</span> |y|
    <span style="color:#080;font-weight:bold">if</span> init == <span style="color:#036;font-weight:bold">NONE</span>
      val = <span style="color:#069">nil</span>
    <span style="color:#080;font-weight:bold">else</span>
      val = init
      y.yield(val)
    <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">begin</span>
      <span style="color:#080;font-weight:bold">while</span> <span style="color:#069">true</span>
        y.yield(val = block.call(val))
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">rescue</span> <span style="color:#036;font-weight:bold">StopIteration</span>
      <span style="color:#777"># do nothing</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="+-instance_method">
  
    #<strong>+</strong>(other)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enum-chain/mrblib/chain.rb', line 12</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">+</span>(other)
  <span style="color:#036;font-weight:bold">Chain</span>.new(<span style="color:#069">self</span>, other)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each-instance_method">
  
    #<strong>each</strong>(*argv, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  enum.each { |elm| block }                    -&gt; obj
  enum.each                                    -&gt; enum
  enum.each(<em>appending_args) { |elm| block }   -&gt; obj
  enum.each(</em>appending_args)                   -&gt; an_enumerator</p>

<p>Iterates over the block according to how this Enumerator was constructed.
If no block and no arguments are given, returns self.</p>

<p>=== Examples</p>

<p>Array.new(3)                     #=&gt; [nil, nil, nil]
  Array.new(3) { |i| i }           #=&gt; [0, 1, 2]
  Array.to_enum(:new, 3).to_a      #=&gt; [0, 1, 2]
  Array.to_enum(:new).each(3).to_a #=&gt; [0, 1, 2]</p>

<p>obj = Object.new</p>

<p>def obj.each_arg(a, b=:b, *rest)
    yield a
    yield b
    yield rest
    :method_returned
  end</p>

<p>enum = obj.to_enum :each_arg, :a, :x</p>

<p>enum.each.to_a                  #=&gt; [:a, :x, []]
  enum.each.equal?(enum)          #=&gt; true
  enum.each { |elm| elm }         #=&gt; :method_returned</p>

<p>enum.each(:y, :z).to_a          #=&gt; [:a, :x, [:y, :z]]
  enum.each(:y, :z).equal?(enum)  #=&gt; false
  enum.each(:y, :z) { |elm| elm } #=&gt; :method_returned</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 270</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">each</span>(*argv, &amp;block)
  obj = <span style="color:#069">self</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#00D">0</span> &lt; argv.length
    obj = <span style="color:#069">self</span>.dup
    args = obj.args
    <span style="color:#080;font-weight:bold">if</span> !args.empty?
      args = args.dup
      args.concat argv
    <span style="color:#080;font-weight:bold">else</span>
      args = argv.dup
    <span style="color:#080;font-weight:bold">end</span>
    obj.args = args
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">return</span> obj <span style="color:#080;font-weight:bold">unless</span> block
  enumerator_block_call(&amp;block)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_with_index-instance_method">
  
    #<strong>each_with_index</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.each_with_index {|(*args), idx| … }
  e.each_with_index</p>

<p>Same as Enumerator#with_index(0), i.e. there is no starting offset.</p>

<p>If no block is given, a new Enumerator is returned that includes the index.</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 184</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">each_with_index</span>(&amp;block)
  with_index(<span style="color:#00D">0</span>, &amp;block)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="feed-instance_method">
  
    #<strong>feed</strong>(value)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.feed obj   -&gt; nil</p>

<p>Sets the value to be returned by the next yield inside +e+.</p>

<p>If the value is not set, the yield returns nil.</p>

<p>This value is cleared after being yielded.</p>

<p># Array#map passes the array’s elements to “yield” and collects the
  # results of “yield” as an array.
  # Following example shows that “next” returns the passed elements and
  # values passed to “feed” are collected as an array which can be
  # obtained by StopIteration#result.
  e = [1,2,3].map
  p e.next           #=&gt; 1
  e.feed “a”
  p e.next           #=&gt; 2
  e.feed “b”
  p e.next           #=&gt; 3
  e.feed “c”
  begin
    e.next
  rescue StopIteration
    p $!.result      #=&gt; [“a”, “b”, “c”]
  end</p>

<p>o = Object.new
  def o.each
    x = yield         # (2) blocks
    p x               # (5) =&gt; “foo”
    x = yield         # (6) blocks
    p x               # (8) =&gt; nil
    x = yield         # (9) blocks
    p x               # not reached w/o another e.next
  end</p>

<p>e = o.to_enum
  e.next              # (1)
  e.feed “foo”        # (3)
  e.next              # (4)
  e.next              # (7)
                      # (10)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TypeError.html" title="TypeError (class)">TypeError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


520
521
522
523
524</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 520</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">feed</span>(value)
  raise <span style="color:#036;font-weight:bold">TypeError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">feed value already set</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@feedvalue</span>
  <span style="color:#33B">@feedvalue</span> = value
  <span style="color:#069">nil</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initialize_copy-instance_method">
  
    #<strong>initialize_copy</strong>(obj)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TypeError.html" title="TypeError (class)">TypeError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 136</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize_copy</span>(obj)
  raise <span style="color:#036;font-weight:bold">TypeError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">can't copy type </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>obj.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">unless</span> obj.kind_of? <span style="color:#036;font-weight:bold">Enumerator</span>
  raise <span style="color:#036;font-weight:bold">TypeError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">can't copy execution context</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">if</span> obj.fib
  <span style="color:#33B">@obj</span> = obj.obj
  <span style="color:#33B">@meth</span> = obj.meth
  <span style="color:#33B">@args</span> = obj.args
  <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
  <span style="color:#069">self</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


225
226
227
228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 225</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">inspect</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@args</span> &amp;&amp; <span style="color:#33B">@args</span>.size &gt; <span style="color:#00D">0</span>
    args = <span style="color:#33B">@args</span>.join(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">, </span><span style="color:#710">&quot;</span></span>)
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#&lt;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#069">self</span>.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@obj</span>.inspect<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@meth</span><span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">(</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>args<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">)&gt;</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">else</span>
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#&lt;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#069">self</span>.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@obj</span>.inspect<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@meth</span><span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">&gt;</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next-instance_method">
  
    #<strong>next</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.next   -&gt; object</p>

<p>Returns the next object in the enumerator, and move the internal position
forward.  When the position reached at the end, StopIteration is raised.</p>

<p>=== Example</p>

<p>a = [1,2,3]
  e = a.to_enum
  p e.next   #=&gt; 1
  p e.next   #=&gt; 2
  p e.next   #=&gt; 3
  p e.next   #raises StopIteration</p>

<p>Note that enumeration sequence by +next+ does not affect other non-external
enumeration methods, unless the underlying iteration methods itself has
side-effect</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 312</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">next</span>
  next_values.__svalue
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next_values-instance_method">
  
    #<strong>next_values</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.next_values   -&gt; array</p>

<p>Returns the next object as an array in the enumerator, and move the
internal position forward.  When the position reached at the end,
StopIteration is raised.</p>

<p>This method can be used to distinguish <code>yield</code> and <code>yield
nil</code>.</p>

<p>=== Example</p>

<p>o = Object.new
  def o.each
    yield
    yield 1
    yield 1, 2
    yield nil
    yield [1, 2]
  end
  e = o.to_enum
  p e.next_values
  p e.next_values
  p e.next_values
  p e.next_values
  p e.next_values
  e = o.to_enum
  p e.next
  p e.next
  p e.next
  p e.next
  p e.next</p>

<p>## yield args       next_values      next
  #  yield            []               nil
  #  yield 1          [1]              1
  #  yield 1, 2       [1, 2]           [1, 2]
  #  yield nil        [nil]            nil
  #  yield [1, 2]     [[1, 2]]         [1, 2]</p>

<p>Note that +next_values+ does not affect other non-external enumeration
methods unless underlying iteration method itself has side-effect</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>@stop_exc</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 360</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">next_values</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@lookahead</span>
    vs = <span style="color:#33B">@lookahead</span>
    <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
    <span style="color:#080;font-weight:bold">return</span> vs
  <span style="color:#080;font-weight:bold">end</span>
  raise <span style="color:#33B">@stop_exc</span> <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@stop_exc</span>

  curr = <span style="color:#036;font-weight:bold">Fiber</span>.current

  <span style="color:#080;font-weight:bold">if</span> !<span style="color:#33B">@fib</span> || !<span style="color:#33B">@fib</span>.alive?
    <span style="color:#33B">@dst</span> = curr
    <span style="color:#33B">@fib</span> = <span style="color:#036;font-weight:bold">Fiber</span>.new <span style="color:#080;font-weight:bold">do</span>
      result = each <span style="color:#080;font-weight:bold">do</span> |*args|
        feedvalue = <span style="color:#069">nil</span>
        <span style="color:#036;font-weight:bold">Fiber</span>.yield args
        <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@feedvalue</span>
          feedvalue = <span style="color:#33B">@feedvalue</span>
          <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
        <span style="color:#080;font-weight:bold">end</span>
        feedvalue
      <span style="color:#080;font-weight:bold">end</span>
      <span style="color:#33B">@stop_exc</span> = <span style="color:#036;font-weight:bold">StopIteration</span>.new <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">iteration reached an end</span><span style="color:#710">&quot;</span></span>
      <span style="color:#33B">@stop_exc</span>.result = result
      <span style="color:#036;font-weight:bold">Fiber</span>.yield <span style="color:#069">nil</span>
    <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#080;font-weight:bold">end</span>

  vs = <span style="color:#33B">@fib</span>.resume curr
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@stop_exc</span>
    <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
    <span style="color:#33B">@dst</span> = <span style="color:#069">nil</span>
    <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
    <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
    raise <span style="color:#33B">@stop_exc</span>
  <span style="color:#080;font-weight:bold">end</span>
  vs
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="peek-instance_method">
  
    #<strong>peek</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.peek   -&gt; object</p>

<p>Returns the next object in the enumerator, but doesn’t move the internal
position forward.  If the position is already at the end, StopIteration
is raised.</p>

<p>=== Example</p>

<p>a = [1,2,3]
  e = a.to_enum
  p e.next   #=&gt; 1
  p e.peek   #=&gt; 2
  p e.peek   #=&gt; 2
  p e.peek   #=&gt; 2
  p e.next   #=&gt; 2
  p e.next   #=&gt; 3
  p e.next   #raises StopIteration</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


420
421
422</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 420</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">peek</span>
  peek_values.__svalue
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="peek_values-instance_method">
  
    #<strong>peek_values</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.peek_values   -&gt; array</p>

<p>Returns the next object as an array, similar to Enumerator#next_values, but
doesn’t move the internal position forward.  If the position is already at
the end, StopIteration is raised.</p>

<p>=== Example</p>

<p>o = Object.new
  def o.each
    yield
    yield 1
    yield 1, 2
  end
  e = o.to_enum
  p e.peek_values    #=&gt; []
  e.next
  p e.peek_values    #=&gt; [1]
  p e.peek_values    #=&gt; [1]
  e.next
  p e.peek_values    #=&gt; [1, 2]
  e.next
  p e.peek_values    # raises StopIteration</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


450
451
452
453
454
455</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 450</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">peek_values</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@lookahead</span>.nil?
    <span style="color:#33B">@lookahead</span> = next_values
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#33B">@lookahead</span>.dup
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rewind-instance_method">
  
    #<strong>rewind</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.rewind   -&gt; e</p>

<p>Rewinds the enumeration sequence to the beginning.</p>

<p>If the enclosed object responds to a “rewind” method, it is called.</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


465
466
467
468
469
470
471
472
473</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 465</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">rewind</span>
  <span style="color:#33B">@obj</span>.rewind <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@obj</span>.respond_to? <span style="color:#A60">:rewind</span>
  <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@dst</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@stop_exc</span> = <span style="color:#069">false</span>
  <span style="color:#069">self</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_index-instance_method">
  
    #<strong>with_index</strong>(offset = 0, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.with_index(offset = 0) {|(*args), idx| … }
  e.with_index(offset = 0)</p>

<p>Iterates the given block for each element with an index, which
starts from +offset+.  If no block is given, returns a new Enumerator
that includes the index, starting from +offset+</p>

<p>+offset+:: the starting index to use</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162
163
164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 159</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">with_index</span>(offset=<span style="color:#00D">0</span>, &amp;block)
  <span style="color:#080;font-weight:bold">return</span> to_enum <span style="color:#A60">:with_index</span>, offset <span style="color:#080;font-weight:bold">unless</span> block

  <span style="color:#080;font-weight:bold">if</span> offset.nil?
    offset = <span style="color:#00D">0</span>
  <span style="color:#080;font-weight:bold">else</span>
    offset = offset.__to_int
  <span style="color:#080;font-weight:bold">end</span>

  n = offset - <span style="color:#00D">1</span>
  enumerator_block_call <span style="color:#080;font-weight:bold">do</span> |*i|
    n += <span style="color:#00D">1</span>
    block.call i.__svalue, n
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_object-instance_method">
  
    #<strong>with_object</strong>(object, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.each_with_object(obj) {|(<em>args), obj| … }
  e.each_with_object(obj)
  e.with_object(obj) {|(</em>args), obj| … }
  e.with_object(obj)</p>

<p>Iterates the given block for each element with an arbitrary object, +obj+,
and returns +obj+</p>

<p>If no block is given, returns a new Enumerator.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>to_three = <span style="color:#036;font-weight:bold">Enumerator</span>.new <span style="color:#080;font-weight:bold">do</span> |y|
  <span style="color:#00D">3</span>.times <span style="color:#080;font-weight:bold">do</span> |x|
    y &lt;&lt; x
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

to_three_with_string = to_three.with_object(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span>)
to_three_with_string.each <span style="color:#080;font-weight:bold">do</span> |x,string|
  puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>string<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>x<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># =&gt; foo:0</span>
<span style="color:#777"># =&gt; foo:1</span>
<span style="color:#777"># =&gt; foo:2</span></code></pre>
    
  </div>


</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218
219
220
221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 216</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">with_object</span>(object, &amp;block)
  <span style="color:#080;font-weight:bold">return</span> to_enum(<span style="color:#A60">:with_object</span>, object) <span style="color:#080;font-weight:bold">unless</span> block

  enumerator_block_call <span style="color:#080;font-weight:bold">do</span> |i|
    block.call [i,object]
  <span style="color:#080;font-weight:bold">end</span>
  object
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Dec 28 01:23:14 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 in <a href="https://github.com/sagmor/yard-mruby">mruby mode</a> 0.3.0 (ruby-2.6.2).
</div>

    </div>
  </body>
</html>